# [Большая семья бабушки Алевтины](https://contest.yandex.ru/contest/28413/problems/C/)

У бабушки Алевтины очень большая семья, которая живёт в разных городах. Раньше все члены семьи собирались дома у бабушки Алевтины, но в 2020 году было решено, что созваниваться по видеосвязи будет безопаснее для всех.

У каждого домохозяйства есть некоторое количество комнат с устройствами, при помощи которых можно организовать видео-конференцию на несколько членов семей из других городов. Комнаты пользуются большим спросом, так как некоторые члены семьи работают на удалёнке и должны встречаться с коллегами по рабочим встречам, поэтому в расписании есть уже занятые слоты. Также все родственники хотят поделиться новостями друг с другом, поэтому у всей семьи есть расписание звонков, чтобы каждый участник мог пообщаться в нужное время.

Вам дана информация о доступности комнат во всех домохозяйствах на день встречи членов семей, а также *m* запросов на проведение часовой встречи для родственников из разных городов. Для каждого запроса требуется определить набор подходящих временных слотов (в каждом городе надо выбрать ровно одну комнату, и все эти комнаты должны быть свободны в какой-то час), или сообщить, что подходящего набора нет.

Обратите внимание, запросы независимы друг от друга, то есть, ответ на очередной запрос не влияет на занятость комнат.

<details>
    <summary>Формат ввода</summary>

В первой строке ввода записано число $с$ ($2 \leq c \leq 16$) - количество домохозяйств. Далее следуют $с$ блоков с описанием домохозяйств. В первой строке каждого блока записано название города, где расположена часть семьи, и количество комнат в нём $n_i$ ($1 \leq n_i \leq 100$). Далее следуют $n_i$ строк, в каждой из которых дано расписание бронирования комнаты $t_{ij}$ и его название $s_{ij}$. Расписание $t_{ij}$ представляет собой строку ровно из 24 символов, $k$-й символ которой равен "Х", если в $k$-й час суток комната недоступна для бронирования, или ".", если доступна.

В следующей строке записано число $m (1 \leq m \leq 1000)$ - количество запросов. В каждой из следующих $m$ строк сначала записано число $l (2 \leq l \leq c)$ - количество городов, в которых должно быть забронировано по одной комнате, а далее записаны $l$ названий городов. Названия городов разделены одиночными пробелами. 

Названия никаких двух комнат не совпадают. Названия никаких двух городов также не совпадают. Названия комнат и городов представляют собой непустые строки, состоящие из букв английского алфавита длиной не более 10 символов.

</details>

<details>
    <summary>Формат вывода</summary>

Для каждого из $m$ запросов в отдельной строке выведите сообщение «Yes» (без кавычек) и названия комнаты, в которой можно организовать встречу, или выведите сообщение «No» (без кавычек), если подходящую комнату найти невозможно.
Комнаты в каждом ответе можно выводить в любом порядке. Если возможных ответов на запрос несколько, разрешается вывести любой подходящий.

</details>

<details>
    <summary>Пример 1</summary>

**Ввод**
```
3
Moscow 2
XXXXXXXX.X.X.X.X.X.XXXXX Kvartal
XXXXXXXXX.X.X.X.X.X.XXXX Kvartet
Minsk 1
XX.XXXXX........XXXXXXXX Toloka
Berlin 2
XX..XXXXXXXXXXXXXXXXXXXX Mitte
XXXXXXXXXXXXXXXX.....XXX Lustgarten
4
3 Moscow Minsk Berlin
2 Moscow Minsk
2 Minsk Berlin
2 Moscow Berlin
```
**Вывод**
```
No
Yes Kvartal Toloka
Yes Toloka Mitte
Yes Kvartal Lustgarten
```

</details>

<details>
    <summary>Пример 2</summary>

**Ввод**
```
3
Moscow 1
XXXXXXXX...........XXXXX Kvartal
Minsk 1
XXXXXXX...........XXXXXX Toloka
Berlin 1
XXXXXX...........XXXXXXX Mitte
1
3 Moscow Minsk Berlin
```
**Вывод**
```
Yes Kvartal Toloka Mitte
```

</details>

## Решение
1. Необходимо считать и реализовать хранение расписания комнат в каждом городе. Преобразуем строчное представление расписания, например "Х.ХХ.Х.Х", в структуру вида "Город" -> "Название комнаты" -> "Свободные часы":
    ```
    {'Moscow': {'Kvartal': {8, 10, 12, 14, 16, 18},
    'Kvartet': {9, 11, 13, 15, 17, 19}},
    'Minsk': {'Toloka': {2, 8, 9, 10, 11, 12, 13, 14, 15}},
    'Berlin': {'Mitte': {2, 3}, 'Lustgarten': {16, 17, 18, 19, 20}}}
    ```
2. Считываем запросы на проведение встречи. Для каждого города находим свободные часы во всех комнатах. Далее определяем пересекающиеся временные слоты в городах запроса. Если совпадающие свободные часы в расписании есть - выводим названия комнат, в которых можно организовать встречу. Иначе выводим сообщение, что подходящую комнату найти невозможно.

Реализация решения: [solution_big_family.py](solution_big_family.py)